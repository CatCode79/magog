RUSTFLAGS = --opt-level 3 -L . --cfg check-gl
GLFW_LINKARGS = --link-args '-lglfw3 -lGL -lX11 -lXxf86vm -lXrandr -lXi'
PA_LINKARGS = --link-args '-lasound -ljack -lportaudio'

!cc = |> clang -Wall -O3 -c %f -o %o |>
!ar = |> ar crs %o %f |>

!rustlib = |> rustc %f --out-dir ./ $(RUSTFLAGS) --crate-type rlib |>
!rustbin = |> rustc %f -o %o $(RUSTFLAGS) |>

!databake = |> echo "&[" > %o; cat %f | xxd -i >> %o; echo "]" >> %o |>

.gitignore
